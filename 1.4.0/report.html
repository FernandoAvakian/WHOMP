<!DOCTYPE js><html><head><title>GFW Mapbuilder</title><meta name="author" content="#{author}"/><meta name="viewport" id="viewport" content="width=device-width, user-scalable=no, initial-scale=1, minimum-scale=1, maximum-scale=1"/><meta http-equiv="X-UA-Compatible" content="IE=Edge"/><meta charset="utf-8"/><link rel="stylesheet" href="css/report.css"/><link rel="stylesheet" href="https://js.arcgis.com/3.20/esri/css/esri.css"/><link rel="stylesheet" href="https://js.arcgis.com/3.20/dijit/themes/tundra/tundra.css"/></head><body><div class="report inner"><header class="report-header flex"><div class="report-header__logo-container"><a id="logo-anchor" target="_blank"><img class="report-header__logo" id="logo"/></a></div><div class="report-header__title-container"><h1 class="report-header__title" id="report-title"></h1><h2 class="report-header__subtitle" id="report-subtitle"></h2></div></header><div class="map" id="map"></div><div class="popup-content" id="popup-content"></div><div class="results-container" id="results-container"></div></div><script>function toObject(querystring) {
  if (!querystring) { return {}; }
  const result = {};
  const pairs = querystring.split('&').map((item) => {
    return item.split('=').map(str => decodeURIComponent(str));
  });
  // Should have an array of arrays now, ex: [['a','b'], ['foo','bar']]
  pairs.forEach((pair) => {
    if ((pair[0] === null || typeof pair[0] === 'undefined') || (pair[0] === null || typeof pair[0] === 'undefined')) {
      console.warn(`You provided an invalid key-value pair, ${pair[0]} is being omitted.`);
      return;
    }
    result[pair[0]] = pair[1];
  });
  return result;
}

let windowPath = location.href;
if (windowPath.indexOf('#') > -1) {
  windowPath = windowPath.slice(0, windowPath.indexOf('#')) + windowPath.slice(windowPath.indexOf('#') + 1, windowPath.length);
}

const bits = windowPath.split('?');
const querystring = bits.length > 1 ? bits[1] : '';
const reportParams = toObject(querystring);

var _app = {
    cache: reportParams.cache,
    esri: 3.20,
    base: ''
};

function makePath (base, path) {
  var position = base.length - 1;
  return !path ?
    (base.indexOf('/', position) !== position ? base + '/' : base) :
    (base.indexOf('/', position) !== position ?
      base + '/' + path :
      base + path
    )
}
function getResourcePath (path) {
  var position = path.length - 1;
  return path.indexOf('/', position) === position ? path.slice(0, -1) : path;
}
// Change this to '' if _app.base is a remote url
var base = location.href.replace(/\/[^/]+$/, '');
// Add trailing slash if it is not present
base = makePath(base);
// Add _app.base if it is present
if (_app.base) { base = makePath(base, _app.base); }

var dojoConfig = {
  parseOnLoad: false,
  async: true,
  packages: [
    { name: 'root', location: getResourcePath(location.href.replace(/\/[^/]+$/, '')) },
    { name: 'js', location: makePath(base, 'js')},
    { name: 'utils', location: makePath(base, 'js/utils')},
    { name: 'helpers', location: makePath(base, 'js/helpers')},
    { name: 'report', location: makePath(base, 'js/report')},
    { name: 'constants', location: makePath(base,'js/constants')}
  ],
  aliases: [
    ['resources', 'root/resources'],
    ['babel-polyfill', 'babel-polyfill/browser-polyfill']
  ],
  deps: ['dojo/domReady!'],
  callback: function () {require(['js/report']);}
};
</script><script src="https://my.gfw-mapbuilder.org/js/arcgis-api-mapbuilder-1.2/dojo/dojo.js" async="async"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/vega/4.2.0/vega.min.js" charset="UTF-8"></script><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');</script></body></html>